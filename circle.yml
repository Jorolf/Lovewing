################################
# CircleCI config for Lovewing #
################################
version: 2
jobs:
  build:
    docker:
      - image: library/mono:latest
    working_directory: ./Lovewing
    steps:
      - checkout
      - run:
          name: Get NuGet
          command: curl -O https://dist.nuget.org/win-x86-commandline/latest/nuget.exe
      - run:
          name: Restore NuGet packages
          command: mono nuget.exe restore
      - run:
          name: Build Lovewing
          command: xbuild /p:Configuration=Release Lovewing.sln
      # TODO: fix tests
      # - run:
      #     name: Run the tests
      #     command: mono Lovewing.Game/bin/Release/Lovewing.Game.exe --tests

notify:
  webhooks:
  - url: https://claraio-circledisc.herokuapp.com/hooks/circleci